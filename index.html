<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø¹Ù…Ù„ - Kamal Yousry</title>
  <!-- Font Awesome Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Google Fonts for modern look -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© */
    body {
      font-family: 'Roboto', sans-serif;
      direction: rtl;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #e0f7fa, #f1f8e9);
      color: #333;
      line-height: 1.6;
    }
    h1 {
      text-align: center;
      margin-top: 20px;
      font-size: 2.8rem;
      color: #007bff;
    }
    .main-menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .tool-button {
      background-color: #fff;
      border: none;
      border-radius: 12px;
      padding: 25px;
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .tool-button:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
    }
    .tool-button i {
      font-size: 2.5rem;
      color: #007bff;
      margin-bottom: 10px;
    }
    .tool-button span {
      font-size: 1.2rem;
      color: #555;
    }
    /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Ø§Ù„Ù…ÙˆØ¯Ø§Ù„) */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      padding: 10px;
    }
    .modal-content {
      background-color: #fff;
      border-radius: 12px;
      padding: 20px 30px;
      width: 100%;
      max-width: 600px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      animation: fadeIn 0.3s ease;
      max-height: 90vh;
      overflow-y: auto;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #ddd;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    .modal-header h2 {
      margin: 0;
      font-size: 1.8rem;
      color: #007bff;
    }
    .modal-header button {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #555;
    }
    .modal-header button:hover { color: #007bff; }
    .modal-body { margin-bottom: 20px; }
    .modal-footer { text-align: center; }
    .modal-footer button {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }
    .modal-footer button:hover { background-color: #0056b3; }
    label {
      display: block;
      margin-top: 15px;
      font-weight: 500;
      color: #555;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
      transition: border-color 0.3s ease;
    }
    input:focus, select:focus { border-color: #007bff; outline: none; }
    .output {
      font-weight: bold;
      margin-top: 20px;
      color: #007bff;
      font-size: 1.2rem;
    }
    .normal { color: green; }
    .borderline { color: orange; }
    .high { color: red; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ddd;
    }
    th { background-color: #f8f9fa; }
    /* ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù…Ù„Ø­ÙˆØ¸ */
    footer {
      text-align: center;
      font-size: 0.9rem;
      color: #aaa;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <h1>Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø¹Ù…Ù„ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© ğŸ› ï¸</h1>

  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
  <div class="main-menu">
    <div class="tool-button" onclick="showModal('absorptionModal')">
      <i class="fas fa-chart-line"></i>
      <span>Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§Ù…ØªØµØ§Øµ</span>
    </div>
    <div class="tool-button" onclick="showModal('unitConverterModal')">
      <i class="fas fa-exchange-alt"></i>
      <span>ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª</span>
    </div>
    <div class="tool-button" onclick="showModal('dilutionModal')">
      <i class="fas fa-flask"></i>
      <span>Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ®ÙÙŠÙØ§Øª</span>
    </div>
    <div class="tool-button" onclick="showModal('reagentRatioModal')">
      <i class="fas fa-vial"></i>
      <span>Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨ Ø§Ù„Ø±ÙŠØ§Ø¬ÙŠÙ†ØªØ§Øª</span>
    </div>
    <div class="tool-button" onclick="showModal('ldlModal')">
      <i class="fas fa-heart"></i>
      <span>Ø­Ø³Ø§Ø¨ LDL</span>
    </div>
    <div class="tool-button" onclick="showModal('egfrModal')">
      <i class="fas fa-kidneys"></i>
      <span>Ø­Ø³Ø§Ø¨ eGFR</span>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§Ù…ØªØµØ§Øµ (Regression tool) -->
  <div id="absorptionModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§Ù…ØªØµØ§Øµ ğŸ¯</h2>
        <button onclick="hideModal('absorptionModal')">&times;</button>
      </div>
      <div class="modal-body">
        <label for="absorption">Ø§Ù„Ø§Ù…ØªØµØ§Øµ:</label>
        <input type="number" step="0.0001" id="absorption" required>
        <label for="result">Ø§Ù„Ù†ØªÙŠØ¬Ø©:</label>
        <input type="number" step="0.01" id="result" required>
        <button type="button" onclick="addData()">Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª â•</button>

        <h3>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø© ğŸ“‹</h3>
        <table id="dataTable">
          <thead>
            <tr>
              <th>Ø§Ù„Ø§Ù…ØªØµØ§Øµ</th>
              <th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th>
              <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
          </thead>
          <tbody id="dataList">
            <!-- Ø³ØªØ¶Ø§Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ù†Ø§ -->
          </tbody>
        </table>

        <h3>Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§Ù…ØªØµØ§Øµ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ğŸ§®</h3>
        <label for="desiredResult">Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø±ØºÙˆØ¨Ø©:</label>
        <input type="number" step="0.01" id="desiredResult" required>
        <button type="button" onclick="calculateAbsorption()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø§Ù…ØªØµØ§Øµ ğŸš€</button>
        <p id="absorptionOutput" class="output"></p>
      </div>
      <div class="modal-footer">
        <button onclick="hideModal('absorptionModal')">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª -->
  <div id="unitConverterModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª ğŸ”„</h2>
        <button onclick="hideModal('unitConverterModal')">&times;</button>
      </div>
      <div class="modal-body">
        <label for="unitValue">Ø§Ù„Ù‚ÙŠÙ…Ø©:</label>
        <input type="number" id="unitValue" required>
        <label for="unitFrom">Ù…Ù† Ø§Ù„ÙˆØ­Ø¯Ø©:</label>
        <select id="unitFrom">
          <option value="g">Ø¬Ø±Ø§Ù… (g)</option>
          <option value="mg">Ù…Ù„ÙŠØ¬Ø±Ø§Ù… (mg)</option>
          <option value="Âµg">Ù…ÙŠÙƒØ±ÙˆØ¬Ø±Ø§Ù… (Âµg)</option>
          <option value="ng">Ù†Ø§Ù†ÙˆØ¬Ø±Ø§Ù… (ng)</option>
          <option value="g/dL">Ø¬Ø±Ø§Ù…/Ø¯ÙŠØ³ÙŠÙ„ØªØ± (g/dL)</option>
          <option value="Âµg/dL">Âµg/dL</option>
          <option value="g/L">Ø¬Ø±Ø§Ù…/Ù„ØªØ± (g/L)</option>
          <option value="mg/dL">Ù…Ù„ÙŠØ¬Ø±Ø§Ù…/Ø¯ÙŠØ³ÙŠÙ„ØªØ± (mg/dL)</option>
          <option value="Âµg/mL">Ù…ÙŠÙƒØ±ÙˆØ¬Ø±Ø§Ù…/Ù…Ù„Ù„ÙŠÙ„ØªØ± (Âµg/mL)</option>
          <option value="mmol/L">Ù…Ù„ÙŠ Ù…ÙˆÙ„/Ù„ØªØ± (mmol/L)</option>
          <option value="mEq/L">Ù…Ù„ÙŠ Ù…ÙƒØ§ÙØ¦/Ù„ØªØ± (mEq/L)</option>
          <option value="%">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© (%)</option>
          <option value="ÂµL">Ù…ÙŠÙƒØ±ÙˆÙ„ØªØ± (ÂµL)</option>
          <option value="mL">Ù…Ù„Ù„ÙŠÙ„ØªØ± (mL)</option>
          <option value="L">Ù„ØªØ± (L)</option>
          <option value="U/L">ÙˆØ­Ø¯Ø©/Ù„ØªØ± (U/L)</option>
          <option value="IU/L">ÙˆØ­Ø¯Ø© Ø¯ÙˆÙ„ÙŠØ©/Ù„ØªØ± (IU/L)</option>
        </select>
        <label for="unitTo">Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ­Ø¯Ø©:</label>
        <select id="unitTo">
          <option value="g">Ø¬Ø±Ø§Ù… (g)</option>
          <option value="mg">Ù…Ù„ÙŠØ¬Ø±Ø§Ù… (mg)</option>
          <option value="Âµg">Ù…ÙŠÙƒØ±ÙˆØ¬Ø±Ø§Ù… (Âµg)</option>
          <option value="ng">Ù†Ø§Ù†ÙˆØ¬Ø±Ø§Ù… (ng)</option>
          <option value="g/dL">Ø¬Ø±Ø§Ù…/Ø¯ÙŠØ³ÙŠÙ„ØªØ± (g/dL)</option>
          <option value="Âµg/dL">Âµg/dL</option>
          <option value="g/L">Ø¬Ø±Ø§Ù…/Ù„ØªØ± (g/L)</option>
          <option value="mg/dL">Ù…Ù„ÙŠØ¬Ø±Ø§Ù…/Ø¯ÙŠØ³ÙŠÙ„ØªØ± (mg/dL)</option>
          <option value="Âµg/mL">Ù…ÙŠÙƒØ±ÙˆØ¬Ø±Ø§Ù…/Ù…Ù„Ù„ÙŠÙ„ØªØ± (Âµg/mL)</option>
          <option value="mmol/L">Ù…Ù„ÙŠ Ù…ÙˆÙ„/Ù„ØªØ± (mmol/L)</option>
          <option value="mEq/L">Ù…Ù„ÙŠ Ù…ÙƒØ§ÙØ¦/Ù„ØªØ± (mEq/L)</option>
          <option value="%">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© (%)</option>
          <option value="ÂµL">Ù…ÙŠÙƒØ±ÙˆÙ„ØªØ± (ÂµL)</option>
          <option value="mL">Ù…Ù„Ù„ÙŠÙ„ØªØ± (mL)</option>
          <option value="L">Ù„ØªØ± (L)</option>
          <option value="U/L">ÙˆØ­Ø¯Ø©/Ù„ØªØ± (U/L)</option>
          <option value="IU/L">ÙˆØ­Ø¯Ø© Ø¯ÙˆÙ„ÙŠØ©/Ù„ØªØ± (IU/L)</option>
        </select>
        <button type="button" onclick="convertUnits()">ØªØ­ÙˆÙŠÙ„ ğŸ”„</button>
        <p id="unitOutput" class="output"></p>
      </div>
      <div class="modal-footer">
        <button onclick="hideModal('unitConverterModal')">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ®ÙÙŠÙØ§Øª -->
  <div id="dilutionModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ®ÙÙŠÙØ§Øª ğŸ§ª</h2>
        <button onclick="hideModal('dilutionModal')">&times;</button>
      </div>
      <div class="modal-body">
        <label for="dilutionRatio">Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ®ÙÙŠÙ (Ù…Ø«Ù„ 1:10):</label>
        <input type="text" id="dilutionRatio" placeholder="1:10" required>
        <button type="button" onclick="calculateDilution()">Ø§Ø­Ø³Ø¨ Ø§Ù„ØªØ®ÙÙŠÙ ğŸ§ª</button>
        <p id="dilutionOutput" class="output"></p>
      </div>
      <div class="modal-footer">
        <button onclick="hideModal('dilutionModal')">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨ Ø§Ù„Ø±ÙŠØ§Ø¬ÙŠÙ†ØªØ§Øª -->
  <div id="reagentRatioModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨ Ø§Ù„Ø±ÙŠØ§Ø¬ÙŠÙ†ØªØ§Øª âš—ï¸</h2>
        <button onclick="hideModal('reagentRatioModal')">&times;</button>
      </div>
      <div class="modal-body">
        <label for="originalReagent1">Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù„Ù„Ø±ÙŠØ§Ø¬ÙŠÙ†Øª Ø§Ù„Ø£ÙˆÙ„ (ÂµL):</label>
        <input type="number" id="originalReagent1" required>
        <label for="originalReagent2">Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù„Ù„Ø±ÙŠØ§Ø¬ÙŠÙ†Øª Ø§Ù„Ø«Ø§Ù†ÙŠ (ÂµL):</label>
        <input type="number" id="originalReagent2" required>
        <label for="newReagent1">Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø±ÙŠØ§Ø¬ÙŠÙ†Øª Ø§Ù„Ø£ÙˆÙ„ (ÂµL):</label>
        <input type="number" id="newReagent1" required>
        <button type="button" onclick="calculateReagentRatio()">Ø§Ø­Ø³Ø¨ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© âš—ï¸</button>
        <p id="reagentOutput" class="output"></p>
      </div>
      <div class="modal-footer">
        <button onclick="hideModal('reagentRatioModal')">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø­Ø³Ø§Ø¨ LDL -->
  <div id="ldlModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Ø­Ø³Ø§Ø¨ LDL ğŸ’“</h2>
        <button onclick="hideModal('ldlModal')">&times;</button>
      </div>
      <div class="modal-body">
        <label>Ø§Ù„ÙƒÙˆÙ„ÙŠØ³ØªØ±ÙˆÙ„ Ø§Ù„ÙƒÙ„ÙŠ (mg/dL):</label>
        <input type="number" id="totalCholesterol" required>
        <label>HDL (mg/dL):</label>
        <input type="number" id="hdl" required>
        <label>Ø§Ù„Ø¯Ù‡ÙˆÙ† Ø§Ù„Ø«Ù„Ø§Ø«ÙŠØ© (mg/dL):</label>
        <input type="number" id="triglycerides" required>
        <button type="button" onclick="calculateLDLTool()">Ø§Ø­Ø³Ø¨ LDL</button>
        <p id="ldlResult" class="output"></p>
        <p id="trigAlert" class="output"></p>
      </div>
      <div class="modal-footer">
        <button onclick="hideModal('ldlModal')">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø­Ø³Ø§Ø¨ eGFR -->
  <div id="egfrModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Ø­Ø³Ø§Ø¨ eGFR ğŸ©º</h2>
        <button onclick="hideModal('egfrModal')">&times;</button>
      </div>
      <div class="modal-body">
        <label>Ø§Ù„ÙƒØ±ÙŠØ§ØªÙŠÙ†ÙŠÙ†:</label>
        <input type="number" step="0.01" id="creatinineVal" required>
        <label>Ø§Ù„ÙˆØ­Ø¯Ø©:</label>
        <select id="creatinineUnit">
          <option value="mg/dL">mg/dL</option>
          <option value="Âµmol/L">Âµmol/L</option>
        </select>
        <label>Ø§Ù„Ø¹Ù…Ø± (years):</label>
        <input type="number" id="ageVal" required>
        <label>Ø§Ù„Ø¹Ø±Ù‚:</label>
        <select id="race">
          <option value="other">Other</option>
          <option value="AA">African American</option>
        </select>
        <label>Ø§Ù„Ø¬Ù†Ø³:</label>
        <select id="genderVal">
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
        <button type="button" onclick="calculateEGFRTool()">Ø§Ø­Ø³Ø¨ eGFR</button>
        <p id="egfrResultTool" class="output"></p>
      </div>
      <div class="modal-footer">
        <button onclick="hideModal('egfrModal')">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
    </div>
  </div>

  <footer>
    &copy; 2025 - Kamal Yousry
  </footer>

  <script>
    /* Ø¯ÙˆØ§Ù„ Ø¥Ø¸Ù‡Ø§Ø± ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†ÙˆØ§ÙØ° */
    function showModal(modalId) {
      document.getElementById(modalId).style.display = 'flex';
    }
    function hideModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    /* --- Ø£Ø¯Ø§Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§Ù…ØªØµØ§Øµ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ù†Ø­Ø¯Ø§Ø± Ø§Ù„Ø®Ø·ÙŠ --- */
    let data = [];
    function addData() {
      const absorption = parseFloat(document.getElementById('absorption').value);
      const result = parseFloat(document.getElementById('result').value);
      if (isNaN(absorption) || isNaN(result)) {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ… ØµØ­ÙŠØ­Ø©!");
        return;
      }
      data.push({ x: absorption, y: result });
      renderTable();
      document.getElementById('absorption').value = '';
      document.getElementById('result').value = '';
      alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
    }
    function renderTable() {
      const dataList = document.getElementById('dataList');
      dataList.innerHTML = '';
      data.forEach((point, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${point.x.toFixed(4)}</td>
          <td>${point.y.toFixed(2)}</td>
          <td><button onclick="deleteData(${index})">Ø­Ø°Ù ğŸ—‘ï¸</button></td>
        `;
        dataList.appendChild(row);
      });
    }
    function deleteData(index) {
      data.splice(index, 1);
      renderTable();
      alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
    }
    function calculateRegression() {
      const n = data.length;
      if (n < 2) {
        alert("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù†Ù‚Ø·ØªÙŠÙ† Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!");
        return null;
      }
      let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0;
      data.forEach(point => {
        sumX += point.x;
        sumY += point.y;
        sumXY += point.x * point.y;
        sumX2 += point.x * point.x;
      });
      const a = (n * sumXY - sumX * sumY) / (n * sumX2 - Math.pow(sumX, 2));
      const b = (sumY - a * sumX) / n;
      return { a, b };
    }
    function calculateAbsorption() {
      const desiredResult = parseFloat(document.getElementById('desiredResult').value);
      if (isNaN(desiredResult)) {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù†ØªÙŠØ¬Ø© Ù…Ø±ØºÙˆØ¨Ø© ØµØ­ÙŠØ­Ø©!");
        return;
      }
      const regression = calculateRegression();
      if (!regression) return;
      const { a, b } = regression;
      const requiredAbsorption = (desiredResult - b) / a;
      document.getElementById('absorptionOutput').textContent = `Ø§Ù„Ø§Ù…ØªØµØ§Øµ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: ${requiredAbsorption.toFixed(4)} ğŸ‰`;
    }

    /* --- Ø£Ø¯Ø§Ø© ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª --- */
    function convertUnits() {
      const unitValue = parseFloat(document.getElementById('unitValue').value);
      const unitFrom = document.getElementById('unitFrom').value;
      const unitTo = document.getElementById('unitTo').value;
      if (isNaN(unitValue)) {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© ØµØ­ÙŠØ­Ø©!");
        return;
      }
      const conversionFactors = {
        g: { mg: 1000, Âµg: 1e6, ng: 1e9 },
        mg: { g: 0.001, Âµg: 1000, ng: 1e6 },
        Âµg: { g: 1e-6, mg: 0.001, ng: 1000 },
        ng: { g: 1e-9, mg: 1e-6, Âµg: 0.001 },
        'g/dL': { 'mg/dL': 10, 'Âµg/dL': 10000 },
        'Âµg/dL': { 'g/dL': 0.0001, 'mg/dL': 0.1 },
        'g/L': { 'mg/dL': 100, 'Âµg/mL': 1000, 'mmol/L': 1, 'mEq/L': 1, '%': 0.1 },
        'mg/dL': { 'g/L': 0.01, 'Âµg/mL': 10, 'mmol/L': 0.01, 'mEq/L': 0.01, '%': 0.001 },
        'Âµg/mL': { 'g/L': 0.001, 'mg/dL': 0.1, 'mmol/L': 0.001, 'mEq/L': 0.001, '%': 0.0001 },
        'mmol/L': { 'g/L': 1, 'mg/dL': 100, 'Âµg/mL': 1000, 'mEq/L': 1, '%': 0.1 },
        'mEq/L': { 'g/L': 1, 'mg/dL': 100, 'Âµg/mL': 1000, 'mmol/L': 1, '%': 0.1 },
        '%': { 'g/L': 10, 'mg/dL': 1000, 'Âµg/mL': 10000, 'mmol/L': 10, 'mEq/L': 10 },
        ÂµL: { mL: 0.001, L: 1e-6 },
        mL: { ÂµL: 1000, L: 0.001 },
        L: { ÂµL: 1e6, mL: 1000 },
        'U/L': { 'IU/L': 1 },
        'IU/L': { 'U/L': 1 }
      };
      let result;
      if (unitFrom === unitTo) {
        result = unitValue;
      } else if (conversionFactors[unitFrom] && conversionFactors[unitFrom][unitTo]) {
        result = unitValue * conversionFactors[unitFrom][unitTo];
      } else {
        alert("Ø§Ù„ØªØ­ÙˆÙŠÙ„ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… Ø¨ÙŠÙ† Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©!");
        return;
      }
      document.getElementById('unitOutput').textContent = `Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${result.toFixed(4)} ${unitTo}`;
    }

    /* --- Ø£Ø¯Ø§Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ®ÙÙŠÙØ§Øª --- */
    function calculateDilution() {
      const dilutionRatio = document.getElementById('dilutionRatio').value;
      const [part1, part2] = dilutionRatio.split(':').map(Number);
      if (isNaN(part1) || isNaN(part2) || part1 <= 0 || part2 <= 0) {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù†Ø³Ø¨Ø© ØªØ®ÙÙŠÙ ØµØ­ÙŠØ­Ø©!");
        return;
      }
      const totalVolume = 1000; // Ø­Ø¬Ù… Ø§Ù„Ø¹ÙŠÙ†Ø© 1000 ÂµL
      const sampleVolume = (totalVolume * part1) / (part1 + part2);
      const diluentVolume = totalVolume - sampleVolume;
      document.getElementById('dilutionOutput').textContent = `Ø­Ø¬Ù… Ø§Ù„Ø¹ÙŠÙ†Ø©: ${sampleVolume.toFixed(2)} ÂµL | Ø­Ø¬Ù… Ø§Ù„Ù…Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù„Ø­ÙŠ: ${diluentVolume.toFixed(2)} ÂµL`;
    }

    /* --- Ø£Ø¯Ø§Ø© Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨ Ø§Ù„Ø±ÙŠØ§Ø¬ÙŠÙ†ØªØ§Øª --- */
    function calculateReagentRatio() {
      const originalReagent1 = parseFloat(document.getElementById('originalReagent1').value);
      const originalReagent2 = parseFloat(document.getElementById('originalReagent2').value);
      const newReagent1 = parseFloat(document.getElementById('newReagent1').value);
      if (isNaN(originalReagent1) || isNaN(originalReagent2) || isNaN(newReagent1) || originalReagent1 <= 0 || originalReagent2 <= 0 || newReagent1 <= 0) {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ… ØµØ­ÙŠØ­Ø©!");
        return;
      }
      const ratio = originalReagent1 / originalReagent2;
      const newReagent2 = newReagent1 / ratio;
      document.getElementById('reagentOutput').textContent = `Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø±ÙŠØ§Ø¬ÙŠÙ†Øª Ø§Ù„Ø«Ø§Ù†ÙŠ: ${newReagent2.toFixed(2)} ÂµL`;
    }

    /* --- Ø£Ø¯Ø§Ø© Ø­Ø³Ø§Ø¨ LDL (Ù…Ø¹Ø§Ø¯Ù„Ø© Friedewald) --- */
    function calculateLDLTool() {
      const totalCholesterol = parseFloat(document.getElementById('totalCholesterol').value);
      const hdl = parseFloat(document.getElementById('hdl').value);
      const triglycerides = parseFloat(document.getElementById('triglycerides').value);
      const resultText = document.getElementById('ldlResult');
      const trigAlert = document.getElementById('trigAlert');
      if (!isNaN(totalCholesterol) && !isNaN(hdl) && !isNaN(triglycerides) && totalCholesterol > 0 && hdl > 0 && triglycerides > 0) {
        if(triglycerides > 400) {
          trigAlert.textContent = "ØªØ­Ø°ÙŠØ±: Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¯Ù‡ÙˆÙ† Ø§Ù„Ø«Ù„Ø§Ø«ÙŠØ© > 400 mg/dLØŒ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ù‚Ø¯ Ù„Ø§ ØªÙƒÙˆÙ† Ø¯Ù‚ÙŠÙ‚Ø©!";
        } else {
          trigAlert.textContent = "";
        }
        const ldl = totalCholesterol - hdl - (triglycerides / 5);
        let classification = "";
        if (ldl < 100) {
          classification = " (Ø·Ø¨ÙŠØ¹ÙŠ)";
          resultText.className = "output normal";
        } else if (ldl < 160) {
          classification = " (Ø­Ø¯ÙŠ)";
          resultText.className = "output borderline";
        } else {
          classification = " (Ù…Ø±ØªÙØ¹)";
          resultText.className = "output high";
        }
        resultText.textContent = `LDL: ${ldl.toFixed(2)} mg/dL${classification}`;
      } else {
        resultText.textContent = "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.";
        resultText.className = "output high";
      }
    }

    /* --- Ø£Ø¯Ø§Ø© Ø­Ø³Ø§Ø¨ eGFR (Ù…Ø¹Ø§Ø¯Ù„Ø© MDRD) --- */
    function calculateEGFRTool() {
      let creatinine = parseFloat(document.getElementById('creatinineVal').value);
      const unit = document.getElementById('creatinineUnit').value;
      if(unit === 'Âµmol/L') {
        // ØªØ­ÙˆÙŠÙ„ Âµmol/L Ø¥Ù„Ù‰ mg/dL
        creatinine = creatinine / 88.4;
      }
      const age = parseInt(document.getElementById('ageVal').value);
      const race = document.getElementById('race').value;
      const gender = document.getElementById('genderVal').value;
      const resultText = document.getElementById('egfrResultTool');
      if (!isNaN(creatinine) && !isNaN(age) && creatinine > 0 && age > 0) {
        let egfr = 175 * Math.pow(creatinine, -1.154) * Math.pow(age, -0.203);
        if(gender === 'female') {
          egfr *= 0.742;
        }
        if(race === 'AA') {
          egfr *= 1.212;
        }
        let classification = "";
        if (egfr >= 90) {
          classification = " (Ø·Ø¨ÙŠØ¹ÙŠ)";
          resultText.className = "output normal";
        } else if (egfr >= 60) {
          classification = " (Ø§Ù†Ø®ÙØ§Ø¶ Ø·ÙÙŠÙ)";
          resultText.className = "output borderline";
        } else {
          classification = " (Ø§Ù†Ø®ÙØ§Ø¶ Ø´Ø¯ÙŠØ¯ - Ø§Ø³ØªØ´Ø± Ø§Ù„Ø·Ø¨ÙŠØ¨)";
          resultText.className = "output high";
        }
        resultText.textContent = `eGFR: ${egfr.toFixed(2)} mL/min/1.73mÂ²${classification}`;
      } else {
        resultText.textContent = "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.";
        resultText.className = "output high";
      }
    }
  </script>
</body>
</html>
